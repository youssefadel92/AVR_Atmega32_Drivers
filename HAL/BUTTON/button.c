/**********************************************************************************************************************
 *  FILE DESCRIPTION
 *  -----------------------------------------------------------------------------------------------------------------*/
/**        \file  button.c
 *        \brief
 *
 *      \details
 *
 *
 *********************************************************************************************************************/

/**********************************************************************************************************************
 *  INCLUDES
 *********************************************************************************************************************/
#include "button.h"

#include "button_config.h"


/**********************************************************************************************************************
*  LOCAL MACROS CONSTANT\FUNCTION
*********************************************************************************************************************/

/**********************************************************************************************************************
 *  LOCAL DATA
 *********************************************************************************************************************/

/**********************************************************************************************************************
 *  GLOBAL DATA
 *********************************************************************************************************************/

/**********************************************************************************************************************
 *  LOCAL FUNCTION PROTOTYPES
 *********************************************************************************************************************/

/**********************************************************************************************************************
 *  LOCAL FUNCTIONS
 *********************************************************************************************************************/

/**********************************************************************************************************************
 *  GLOBAL FUNCTIONS
 *********************************************************************************************************************/

/******************************************************************************
* \Syntax          : void button_init(void)
* \Description     : this service for initialzing buttons
*
* \Sync\Async      : Synchronous
* \Reentrancy      : Non Reentrant
* \Parameters (in) : None
* \Return value:   : None
*******************************************************************************/
void button_init(void)
{
	u8 i;
	for(i=0;i<num_of_buttons;i++){
		dio_vidConfigChannel(buttons[i].BUTTON_PORT,buttons[i].BUTTON_CHANNEL_NUM, INPUT);
		if(buttons[i].BUTTON_PULL_UP & buttons[i].BUTTON_INTERNAL)
			dio_vidEnablePullUp(buttons[i].BUTTON_PORT, buttons[i].BUTTON_CHANNEL_NUM);
	}

}

/******************************************************************************
* \Syntax          : BUTTON_STATUS button_get_status(BUTTON_ID)
* \Description     : this service for getting button status
*
* \Sync\Async      : Synchronous
* \Reentrancy      : Non Reentrant
* \Parameters (in) : id 	   -> BUTTON ID
* \Return value:   : BUTTON_STATUS (PRESSED 1-RELEASED 0)
*******************************************************************************/
BUTTON_STATUS button_get_status(BUTTON_ID id)
{
	if(dio_dioLevelReadChannel(buttons[id].BUTTON_PORT,buttons[id].BUTTON_CHANNEL_NUM)==STD_HIGH){
		if(buttons[id].BUTTON_PULL_UP==1)
			return RELEASED;
		else
			return PRESSED;
	}
	else{
		if(buttons[id].BUTTON_PULL_UP==1)
			return PRESSED;
		else
			return RELEASED;
	}
}

/**********************************************************************************************************************
 *  END OF FILE: button.c
 *********************************************************************************************************************/
